/*
 * 文件名称：data.h
 * 文件路径：.\MobileBusinessHallSystem\data.h
 * 功能描述：数据持久化模块头文件 - 定义数据存储和加载的相关函数接口
 *          负责系统数据的初始化、保存、加载和恢复功能
 * 作    者：
 * 创建日期：2025-10-29
 * 版本信息：v2.2（适配全局变量管理）
 * 版权声明：© 2025 | 保留所有权利
 * 
 * 实现说明：
 * 1. 提供系统数据初始化接口，包括用户数据和手机号资源
 * 2. 支持数据的保存和加载，确保系统状态持久化
 * 3. 处理数据文件的创建、读取和写入操作
 * 4. 提供手机号资源的重新初始化功能
 * 
 * 依赖说明：
 * - 自定义模块：menu.h（界面样式定义）
 * 
 * 修改记录：
 * 2025-10-29  新增文件，定义数据持久化接口（v1.0）
 * 2025-10-30  扩展接口，支持手机号资源管理（v2.0）
 * 2025-10-30  优化接口设计，适配新的系统架构（v2.1）
 * 2025-11-1   适配全局变量管理（v2.2）
 * 2025-11-3   优化数据加载逻辑（v2.3)
 */

#ifndef _DATA
#define _DATA

#include "menu.h"

// ========== 数据存储函数声明 ==========

/**
 * @brief 初始化系统数据
 * @retval 无
 * 
 * 功能说明：
 * - 初始化系统核心数据结构
 * - 准备默认的手机号资源
 * - 为系统运行准备基础数据环境
 */
void initSystem();

/**
 * @brief 保存系统数据到文件
 * @retval 无
 * 
 * 功能说明：
 * - 将用户数据保存到用户数据文件
 * - 将手机号资源保存到手机号数据文件
 * - 确保数据的一致性和完整性
 */
void saveData();

/**
 * @brief 从文件加载系统数据
 * @retval 无
 * 
 * 功能说明：
 * - 加载用户数据到内存
 * - 加载手机号资源到管理器
 * - 恢复系统到上次保存的状态
 */
void loadData();

/**
 * @brief 创建初始数据文件
 * @retval int 创建的用户数据数量
 * 
 * 功能说明：
 * - 创建用户数据文件
 * - 写入初始用户数据
 * - 返回成功创建的数据记录数
 */
int createData();

/**
 * @brief 读取用户数据文件
 * @retval int 读取的用户数据数量
 * 
 * 功能说明：
 * - 从文件读取用户数据到内存
 * - 更新用户计数
 * - 返回成功读取的数据记录数
 */
int readData();

/**
 * @brief 重新初始化手机号资源
 * @retval 无
 * 
 * 功能说明：
 * - 清理现有手机号资源
 * - 重新生成默认号段的手机号
 * - 保存重新初始化的资源到文件
 */
void reinitializePhoneResources();

#endif
# 移动营业厅管理系统 - 使用说明

## 系统概述

移动营业厅管理系统是一个基于C语言开发的综合性用户管理和手机号资源管理平台。系统提供了完整的用户信息管理、手机号分配与解绑、数据持久化存储等功能，采用模块化设计和彩色控制台界面，具有良好的用户体验。

## 系统特性

### ✨ 核心功能
- **用户管理**：新增、查找、修改、注销用户信息
- **手机号管理**：号段放号、随机选号、绑定解绑手机号
- **智能识别**：自动从身份证提取性别和年龄信息
- **数据持久化**：用户数据和手机号资源自动保存加载
- **输入验证**：完整的身份证号和手机号格式校验

### 🎨 界面特色
- 彩色控制台界面，支持UTF-8编码
- 键盘导航操作（↑↓键选择，Enter键确认）
- 统一的美观输出样式
- 实时操作反馈和状态提示

## 系统要求

### 运行环境
- **操作系统**：Windows 7/10/11
- **编译器**：支持C99标准的编译器（推荐MSVC或MinGW）
- **控制台**：支持ANSI颜色代码的控制台

### 依赖库
- 标准C库（stdio.h, stdlib.h, string.h等）
- Windows API（windows.h, conio.h）

## 文件结构

```
MobileBusinessHallSystem/
├── main.c          # 程序入口，系统初始化
├── menu.h/c        # 菜单界面和样式管理
├── user.h/c        # 用户管理模块
├── phone.h/c       # 手机号管理模块
├── data.h/c        # 数据持久化模块
├── utils.h/c       # 工具函数（验证、计算等）
└── 数据文件
    ├── userData.dat    # 用户数据文件
    └── phoneData.dat   # 手机号资源文件
```

## 编译运行

### 编译方法
```bash
# 使用GCC编译
gcc main.c menu.c user.c phone.c data.c utils.c -o output\MobileBusinessHallSystem

# 或使用Visual Studio编译
cl main.c menu.c user.c phone.c data.c utils.c
```

### 运行程序
```bash
./MobileBusinessHallSystem
```

## 功能模块详解

### 1. 用户管理模块
- **新增用户**：录入用户基本信息，自动从身份证识别性别和年龄
- **查找用户**：支持按身份证号、手机号、姓名多种方式查找
- **修改信息**：可修改姓名、性别、年龄、职业、地址等信息
- **注销用户**：安全注销用户（需先解绑所有手机号）
- **显示用户**：查看所有用户信息，支持多种排序方式

### 2. 手机号管理模块
- **号段管理**：支持初始化新的手机号号段资源
- **随机选号**：从可用号码中随机分配
- **绑定手机号**：为用户绑定手机号，支持手动输入和随机选择
- **解绑手机号**：注销用户指定的手机号
- **数量限制**：每个用户最多绑定5个手机号

### 3. 数据管理模块
- **自动保存**：关键操作后自动保存数据
- **启动加载**：程序启动时自动加载已有数据
- **文件备份**：用户数据和手机号资源分开存储

### 4. 验证工具模块
- **身份证验证**：18位身份证格式、校验码、出生日期验证
- **手机号验证**：11位手机号格式验证
- **号段验证**：手机号号段格式验证

## 使用指南

### 首次使用
1. 编译并运行程序
2. 系统自动初始化默认手机号号段（138、139、150）
3. 开始添加用户和管理手机号

### 日常操作流程
1. **新增用户** → 输入基本信息 → 选择是否立即绑定手机号
2. **管理手机号** → 为用户绑定/解绑手机号
3. **查询信息** → 多种方式查找用户信息
4. **数据保存** → 系统自动保存，也可手动保存

### 键盘操作
- **↑↓键**：在菜单中上下移动选择
- **Enter键**：确认选择
- **ESC键**：返回或退出系统
- **任意键**：在提示处继续

## 数据格式说明

### 用户信息
- 姓名：最大19字符
- 性别：男/女/其他
- 年龄：1-120岁
- 身份证号：18位标准格式
- 职业：最大29字符
- 地址：最大49字符

### 手机号规则
- 标准11位手机号
- 号段格式：1开头，第二位3-9
- 每个用户最多绑定5个号码

## 注意事项

⚠️ **重要提醒**
- 注销用户前必须解绑所有手机号
- 身份证号是用户的唯一标识
- 系统数据文件请勿手动修改
- 建议定期备份数据文件

## 版本信息

- **当前版本**：v2.3
- **更新日期**：2025-10-31
- **主要更新**：
  - 修复用户唯一性检测逻辑
  - 增强身份证自动识别功能
  - 优化界面样式和用户体验

## 技术支持

- **开发者**：移动营业厅系统开发小组
- **联系方式**：
- **版权声明**：© 2025 移动营业厅系统开发小组，保留所有权利

## 故障排除

### 常见问题

1. **界面乱码**：确保控制台支持UTF-8编码
2. **数据加载失败**：检查数据文件是否存在且完整
3. **编译错误**：确认所有源文件在同一目录且依赖完整

### 数据恢复
如遇数据文件损坏，可删除损坏文件后重新启动系统，系统将重新初始化默认数据。
